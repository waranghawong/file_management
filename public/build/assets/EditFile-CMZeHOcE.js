import{W as m,r as u,j as e,a as N}from"./app-Cpb7qqgU.js";import{T as x}from"./TextInput-oJhRrCV7.js";import{I as p}from"./InputError-DXUPXg-N.js";import{A as k}from"./AuthenticatedLayout-XfkgbOYW.js";import{D}from"./DeleteModal-Cyb4Y-um.js";import{I as _}from"./InputLabel-DQsS3w_t.js";import{S,D as C}from"./SecondaryButton-8Ayq7qmN.js";import"./Dropdown-CsGHkHOF.js";import"./transition-4EldXNB4.js";import"./dialog-CLctU-Vl.js";function J({auth:o,get_file:t,folder_name:f}){const{delete:h}=m({}),[g,i]=u.useState(!1),{data:n,setData:d,patch:F,processing:r,errors:c,recentlySuccessful:I}=m({file_name:t.file_name,file:"",description:t.description,uploader_id:o.user.id}),[a,b]=u.useState({delete:""}),v={delete:"delete"},w=s=>{s.preventDefault()},y=()=>{i(!0)},l=()=>{i(!1),reset()},j=s=>{s.preventDefault(),JSON.stringify(a)==JSON.stringify(v)==!0&&h(route("file.destroy",t.id),{preserveScroll:!0,onSuccess:()=>l(),onError:()=>passwordInput.current.focus(),onFinish:()=>reset()})};return e.jsxs(k,{user:o.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight",children:"File Info"}),children:[e.jsx(N,{title:"Edit Files"}),e.jsxs("div",{className:"py-32",children:[e.jsx("form",{className:"p-4 md:p-5 ",onSubmit:w,enctype:"multipart/form-data",children:e.jsxs("div",{className:"w-3/4  overflow-hidden mx-auto sm:px-6 lg:px-8 space-y-6",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{for:"name",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"File Name"}),e.jsx(x,{id:"file_name",name:"file_name",className:"mt-1 block w-full",value:n.file_name,required:!0,isFocused:!0,autoComplete:"file_name",onChange:s=>d("file_name",s.target.value)}),e.jsx(p,{message:c.file_name,className:"mt-2"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{for:"description",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"File Description"}),e.jsx("textarea",{id:"description",value:n.description,onChange:s=>d("description",s.target.value),rows:"4",className:"block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Write the file description here"})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{for:"category",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Folder Name"}),e.jsx("span",{className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:f})]}),e.jsxs("div",{className:"col-span-2 sm:col-span-1",children:[e.jsx("label",{class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",for:"file_input",children:"View PDF"}),e.jsxs("a",{href:route("view_pdf",t.id),target:"__blank",className:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded inline-flex items-center",children:[e.jsx("svg",{class:"fill-current w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M13 8V2H7v6H2l8 8 8-8h-5zM0 18h20v2H0v-2z"})}),"Open"]})]}),e.jsxs("button",{type:"submit",disabled:r,className:"text-white inline-flex items-center bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:[e.jsx("svg",{className:"me-1 -ms-1 w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})}),"Submit"]}),"Â ",e.jsxs("button",{disabled:r,onClick:y,className:"text-white inline-flex items-center bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-blue-800",children:[e.jsx("svg",{className:"me-1 -ms-1 w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"})}),"Delete"]})]})}),e.jsx(D,{show:g,onClose:l,maxWidth:"md",children:e.jsxs("form",{onSubmit:j,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Are you sure you want to delete this file?"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:["Once your file is deleted, all of its resources and data will be permanently deleted. Please type ",e.jsx("span",{className:"text-red-800 font-medium",children:"delete"})," to confirm you would like to permanently delete the file."]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(_,{htmlFor:"password",value:"Password",className:"sr-only"}),e.jsx(x,{id:"password",type:"text",name:"password",value:a.password,onChange:s=>b({...a,delete:s.target.value}),className:"mt-1 block w-full",isFocused:!0}),e.jsx(p,{message:c.password,className:"mt-2"})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(S,{onClick:l,children:"Cancel"}),e.jsx(C,{className:"ms-3",disabled:r,children:"Delete"})]})]})})]})]})}export{J as default};
